fence:
  USER_YAML: |
    authz:
      # policies automatically given to anyone, even if they are not authenticated
      anonymous_policies: []
    #  - open_data_reader

      # policies automatically given to authenticated users (in addition to their other policies)
      all_users_policies: []

      groups:

      - name: data_submitters
        policies:
        - workspace
        - services.sheepdog-admin
        - data_upload
        - aced_submitter
        users:
        - walsbr@ohsu.edu
        - ellrott@ohsu.edu
        - peterkor@ohsu.edu
        - beckmanl@ohsu.edu

      # can read aced
      - name: aced_readers
        policies:
        - aced_reader
        users:
        - karolin.kroese@cancer.org.uk
        - d.kelberman@ucl.ac.uk
        - watsoner@ohsu.edu
        - wa266@cam.ac.uk
        - martin.bone@manchester.ac.uk
        - talisia.quallo@cancer.org.uk
        - ogevaert@stanford.edu
        # testing OHSU
        - brian@bwalsh.com
        - kellrott@gmail.com
        - matthewpeterkort@gmail.com
        - lbeckman314@gmail.com
        - leejor@ohsu.edu
        - karlberb@ohsu.edu

      # can create/update/delete indexd records
      - name: indexd_admins
        policies:
        - indexd_admin
        users:
        - brian@bwalsh.com

      resources:
      - name: workspace
      - name: data_file
      - name: services
        subresources:
        - name: sheepdog
          subresources:
          - name: submission
            subresources:
            - name: program
            - name: project
      - name: open
      - name: programs
        subresources:
        - name: aced
          subresources:
          - name: projects
            subresources:
            - name: Alcoholism
            - name: Alzheimers
            - name: Breast_Cancer
            - name: Colon_Cancer
            - name: Diabetes
            - name: Lung_Cancer
            - name: Prostate_Cancer
            - name: HOP
            - name: NVIDIA
      policies:
      - id: workspace
        description: be able to use workspace
        resource_paths:
        - /workspace
        role_ids:
        - workspace_user
      - id: data_upload
        description: upload raw data files to S3
        role_ids:
        - file_uploader
        resource_paths:
        - /data_file
      - id: services.sheepdog-admin
        description: CRUD access to programs and projects
        role_ids:
          - sheepdog_admin
        resource_paths:
          - /services/sheepdog/submission/program
          - /services/sheepdog/submission/project
      - id: indexd_admin
        description: full access to indexd API
        role_ids:
          - indexd_admin
        resource_paths:
          - /programs
          - /data_file
      - id: open_data_reader
        role_ids:
          - reader
          - storage_reader
        resource_paths:
        - /programs/aced/projects/Prostate_Cancer
      - id: all_programs_reader
        role_ids:
        - reader
        - storage_reader
        resource_paths:
        - /programs
      - id: aced_submitter
        role_ids:
        - reader
        - creator
        - updater
        - deleter
        - storage_reader
        - storage_writer
        resource_paths:
        - /programs/aced/projects/Alcoholism
        - /programs/aced/projects/Alzheimers
        - /programs/aced/projects/Breast_Cancer
        - /programs/aced/projects/Colon_Cancer
        - /programs/aced/projects/Diabetes
        - /programs/aced/projects/Lung_Cancer
        - /programs/aced/projects/Prostate_Cancer
        - /programs/aced/projects/HOP
        - /programs/aced/projects/NVIDIA
      - id: aced_reader
        role_ids:
        - reader
        - storage_reader
        resource_paths:
        - /programs/aced/projects/Alzheimers
        - /programs/aced/projects/Breast_Cancer
        - /programs/aced/projects/Colon_Cancer
        - /programs/aced/projects/Diabetes
        - /programs/aced/projects/Lung_Cancer
        - /programs/aced/projects/NVIDIA
      - id: aced_embargo
        role_ids:
        - reader
        - storage_reader
        resource_paths:
        - /programs/aced/projects/Alcoholism
        - /programs/aced/projects/HOP


      roles:
      - id: file_uploader
        permissions:
        - id: file_upload
          action:
            service: fence
            method: file_upload
      - id: workspace_user
        permissions:
        - id: workspace_access
          action:
            service: jupyterhub
            method: access
      - id: sheepdog_admin
        description: CRUD access to programs and projects
        permissions:
        - id: sheepdog_admin_action
          action:
            service: sheepdog
            method: '*'
      - id: indexd_admin
        description: full access to indexd API
        permissions:
        - id: indexd_admin
          action:
            service: indexd
            method: '*'
      - id: admin
        permissions:
          - id: admin
            action:
              service: '*'
              method: '*'
      - id: creator
        permissions:
          - id: creator
            action:
              service: '*'
              method: create
      - id: reader
        permissions:
          - id: reader
            action:
              service: '*'
              method: read
      - id: updater
        permissions:
          - id: updater
            action:
              service: '*'
              method: update
      - id: deleter
        permissions:
          - id: deleter
            action:
              service: '*'
              method: delete
      - id: storage_writer
        permissions:
          - id: storage_creator
            action:
              service: '*'
              method: write-storage
      - id: storage_reader
        permissions:
          - id: storage_reader
            action:
              service: '*'
              method: read-storage

    clients:
      wts:
        policies:
        - all_programs_reader
        - open_data_reader

    users:
      brian@bwalsh.com:
        tags:
          name: Brian Walsh
          org: OHSU

      # admin
      walsbr@ohsu.edu:
        tags:
          name: Brian Walsh
          org: OHSU

      # admin
      ellrott@ohsu.edu:
        tags:
          name: Kyle Ellrott
          org: OHSU

      kellrott@gmail.com:
        tags:
          name: Kyle Ellrott
          org: OHSU

      # admin
      peterkor@ohsu.edu:
        tags:
          name: Matthew Peterkort
          org: OHSU

      matthewpeterkort@gmail.com:
        tags:
          name: Matthew Peterkort
          org: OHSU

      # admin
      beckmanl@ohsu.edu:
        tags:
          name: Liam Beckman
          org: OHSU

      lbeckman314@gmail.com:
        tags:
          name: Liam Beckman
          org: OHSU

      leejor@ohsu.edu:
        tags:
          name: Jordan Lee
          org: OHSU

      karlberb@ohsu.edu:
        tags:
          name: Brian Karlberg
          org: OHSU


      karolin.kroese@cancer.org.uk:
        tags:
          name: Karolin Kroese
          org: CRUK

      d.kelberman@ucl.ac.uk:
        tags:
          name: Dan Kelberman
          org: UCL

      watsoner@ohsu.edu:
        tags:
          name: Erin Watson
          org: OHSU

      wa266@cam.ac.uk:
        tags:
          name: Wendy Alderton
          org: Cambridge

      martin.bone@manchester.ac.uk:
        tags:
          name: Martin Bone
          org: Manchester

      talisia.quallo@cancer.org.uk:
        tags:
          name: Talisia Quallo
          org: CRUK

      ogevaert@stanford.edu:
        tags:
          name: Olivier Gevaert
          org: Stanford

    cloud_providers: {}
    groups: {}